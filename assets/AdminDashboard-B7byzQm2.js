import{c as m,j as e,a as j,b as v,u as N,r as u,d as y,e as b,s as i,B as o,C,f as w,m as L,g as B}from"./index-PrCzfKOI.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h=m("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S=m("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z=m("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),D=v("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function A({className:a,variant:r,...l}){return e.jsx("div",{className:j(D({variant:r}),a),...l})}function E(){const a=N(),[r,l]=u.useState(null),{data:s,isLoading:p}=y(),x=b();u.useEffect(()=>{i.auth.getSession().then(({data:{session:n}})=>{n?l(n.user):a("/admin")});const{data:{subscription:t}}=i.auth.onAuthStateChange((n,d)=>{d?l(d==null?void 0:d.user):a("/admin")});return()=>t.unsubscribe()},[a]);const f=async()=>{await i.auth.signOut(),a("/admin")},c={total:(s==null?void 0:s.length)||0,pending:(s==null?void 0:s.filter(t=>t.status==="pending").length)||0,confirmed:(s==null?void 0:s.filter(t=>t.status==="confirmed").length)||0},g={pending:"bg-yellow-500/20 text-yellow-400",confirmed:"bg-green-500/20 text-green-400",completed:"bg-blue-500/20 text-blue-400",cancelled:"bg-red-500/20 text-red-400"};return e.jsxs("div",{className:"min-h-screen bg-background p-4 md:p-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"font-display text-2xl font-bold text-gradient",children:"Admin Dashboard"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:r==null?void 0:r.email})]}),e.jsxs(o,{onClick:f,variant:"outline",size:"sm",children:[e.jsx(z,{className:"w-4 h-4 mr-2"})," Logout"]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-8",children:[{label:"Total Bookings",value:c.total,icon:C,color:"text-primary"},{label:"Pending",value:c.pending,icon:w,color:"text-yellow-400"},{label:"Confirmed",value:c.confirmed,icon:h,color:"text-green-400"}].map(t=>e.jsx(L.div,{className:"glass p-6 rounded-xl",whileHover:{scale:1.02},children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(t.icon,{className:`w-8 h-8 ${t.color}`}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:t.label}),e.jsx("p",{className:"text-3xl font-bold",children:t.value})]})]})},t.label))}),e.jsxs("div",{className:"glass rounded-xl overflow-hidden",children:[e.jsx("div",{className:"p-4 border-b border-primary/10",children:e.jsx("h2",{className:"font-display font-semibold",children:"Recent Bookings"})}),e.jsx("div",{className:"overflow-x-auto",children:p?e.jsx("div",{className:"p-8 text-center text-muted-foreground",children:"Loading..."}):e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{className:"bg-secondary/30",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left p-4",children:"Customer"}),e.jsx("th",{className:"text-left p-4",children:"Car"}),e.jsx("th",{className:"text-left p-4",children:"Dates"}),e.jsx("th",{className:"text-left p-4",children:"Total"}),e.jsx("th",{className:"text-left p-4",children:"Status"}),e.jsx("th",{className:"text-left p-4",children:"Actions"})]})}),e.jsx("tbody",{children:s==null?void 0:s.map(t=>e.jsxs("tr",{className:"border-t border-primary/10",children:[e.jsxs("td",{className:"p-4",children:[e.jsx("div",{children:t.customer_name}),e.jsx("div",{className:"text-xs text-muted-foreground",children:t.customer_mobile})]}),e.jsx("td",{className:"p-4",children:t.cars?`${t.cars.model} (${t.cars.year})`:"N/A"}),e.jsxs("td",{className:"p-4 text-xs",children:[e.jsx("div",{children:new Date(t.pickup_date).toLocaleDateString()}),e.jsxs("div",{className:"text-muted-foreground",children:["to ",new Date(t.dropoff_date).toLocaleDateString()]})]}),e.jsx("td",{className:"p-4 font-semibold",children:B(t.total_price)}),e.jsx("td",{className:"p-4",children:e.jsx(A,{className:g[t.status],children:t.status})}),e.jsx("td",{className:"p-4",children:t.status==="pending"&&e.jsxs("div",{className:"flex gap-2",children:[e.jsx(o,{size:"sm",onClick:()=>x.mutate({id:t.id,status:"confirmed"}),className:"bg-green-600 hover:bg-green-700",children:e.jsx(h,{className:"w-3 h-3"})}),e.jsx(o,{size:"sm",variant:"destructive",onClick:()=>x.mutate({id:t.id,status:"cancelled"}),children:e.jsx(S,{className:"w-3 h-3"})})]})})]},t.id))})]})})]})]})}export{E as default};
